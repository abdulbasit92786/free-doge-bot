<!-- File: tasks.html -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>🧠 Earn Tasks</title>
  <link rel="stylesheet" href="style.css">
  <style>
    .task-card {
      background: #fff;
      padding: 15px;
      border-radius: 10px;
      margin-bottom: 15px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
    .task-card h3 {
      margin-top: 0;
    }
    .task-card button {
      margin-top: 10px;
      background-color: #FFD700;
      color: black;
      padding: 8px 12px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }
    iframe {
      width: 100%;
      height: 200px;
      border-radius: 10px;
      margin-top: 10px;
    }
  </style>
</head>
<body>
  <div class="container">
    <h2>🧠 Complete Tasks & Earn DOGE</h2>

    <div class="task-card">
      <h3>📺 Watch YouTube Video</h3>
      <p>Earn 1 DOGE by watching this video below.</p>
      <iframe src="https://www.youtube.com/embed/6PNL6h4IxeI" frameborder="0" allowfullscreen></iframe>
      <button onclick="submitTask(1)">✅ I Watched It</button>
    </div>

    <div class="task-card">
      <h3>🌐 Visit a Website</h3>
      <p>Earn 0.5 DOGE by visiting this site.</p>
      <a href="https://abdulbasit92786.github.io/free-doge-bot/" target="_blank">
        <button onclick="submitTask(0.5)">🌍 Visit & Earn</button>
      </a>
    </div>

    <div class="task-card">
      <h3>👥 Join Telegram Group</h3>
      <p>Earn 2 DOGE by joining our official group.</p>
      <a href="https://t.me/bainancefree92" target="_blank">
        <button onclick="submitTask(2)">📲 Join Now</button>
      </a>
    </div>

    <a href="index.html"><button style="margin-top: 20px;">🔙 Back</button></a>
  </div>

  <script>
    function submitTask(earning) {
      // Update localStorage
      let prev = parseFloat(localStorage.getItem("taskEarnings") || 0);
      let updated = prev + earning;
      localStorage.setItem("taskEarnings", updated.toFixed(2));

      // Notify admin via Telegram
      const TOKEN = "7436258467:AAHOf0R4lMn21XrOrJGIt-L5IuYu3yR9phs";
      const CHAT_ID = "7584161210";

      const message = `
📥 *Task Completed!*
💰 Earned: ${earning} DOGE
📊 Total now: ${updated.toFixed(2)} DOGE
`;

      fetch(`https://api.telegram.org/bot${TOKEN}/sendMessage`, {
        method: "POST",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify({
          chat_id: CHAT_ID,
          text: message,
          parse_mode: "Markdown"
        })
      }).then(res => {
        if (res.ok) {
          alert(`✅ You earned ${earning} DOGE!`);
        } else {
          alert("❌ Could not notify admin.");
        }
      });
    }
  </script>
</body>
</html>
